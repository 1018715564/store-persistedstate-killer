!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("crypto-js"),require("lscache")):"function"==typeof define&&define.amd?define(["exports","crypto-js","lscache"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).rem={},e.crypto$1,e.lscache)}(this,function(e,t,n){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=o(t),c=o(n);function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a="development"===process.env.NODE_ENV,s="persistedstate-killer",n=Object.freeze({__proto__:null,init:function(e){for(var t=localStorage.length,n=[],o="".concat(s,"-").concat(e.store.$id,"-"),r=0;r<t;r++){var l,a=localStorage.key(r);null!=a&&a.includes(o)&&null!==(l=localStorage.key(r))&&void 0!==l&&l.includes(s)&&n.push(null===(a=localStorage.key(r))||void 0===a?void 0:a.replace("lscache-",""))}var i={};n.map(function(e){i[e.split(o)[1]]=c.default.get(e)}),e.store.$patch(i)},use:function(e){a&&console.log("ðŸ¥· store-persistedstate-killer running..."),e.store.$subscribe(function(e){var t=Array.isArray(e.events);if(!t||0!==e.events.length){if(t||(e.events=[e.events]),a&&console.log("ðŸ¥· react to store changes:"),a)for(var n in e.events)console.log("ðŸ¥· ".concat(e.events[n].key," (").concat(e.storeId,"): ").concat(e.events[n].oldValue," -> ").concat(e.events[n].newValue));for(var o in e.events)c.default.set("".concat(s,"-").concat(e.storeId,"-").concat(e.events[o].key),e.events[o].newValue)}})}}),n=Object.freeze({__proto__:null,pinia:n});e.crypto=Object.freeze({__proto__:null,default:function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.options=e||null,this.ctx=t||null,this.iv=r.default.lib.WordArray.random(16);t=(null===(e=this.ctx)||void 0===e?void 0:e.app.head.title)||"",e=navigator.userAgent.toLowerCase()||"";this.key=r.default.PBKDF2(e,t||"",{keySize:64,iterations:64})}var e,t,o;return e=n,(t=[{key:"setKey",value:function(e,t,n,o){this.key=r.default.PBKDF2(e,t,{keySize:64|o,iterations:64|n})}},{key:"encrypt",value:function(e){var t;if("debug"===(null===(t=this.options)||void 0===t?void 0:t.mode))return e;try{return r.default.AES.encrypt(e,this.key,{iv:this.iv,mode:r.default.mode.CBC,padding:r.default.pad.Pkcs7}).toString()}catch(e){return console.log(e),null}}},{key:"decrypt",value:function(e,t){try{var n=r.default.AES.decrypt(e,this.key,{iv:this.iv,mode:r.default.mode.CBC,padding:r.default.pad.Pkcs7}).toString(r.default.enc.Utf8);return null!=t&&t.parse?JSON.parse(n):n}catch(e){return null}}}])&&l(e.prototype,t),o&&l(e,o),n}()}),e.plugins=n,Object.defineProperty(e,"__esModule",{value:!0})});
